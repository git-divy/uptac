<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>UPTAC/AKTU COLLEGE PREDICTOR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="UPTAC College Predictor helps you find the best college based on your UPTAC 2024 rank, category, quota, and program."
    />
    <meta
      name="keywords"
      content="UPTAC, AKTU, College Predictor, UPTU, Engineering Admission, Counselling, Rank Wise Colleges"
    />
    <meta name="author" content="UPTAC Tools Team" />

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="UPTAC College Predictor 2024" />
    <meta
      property="og:description"
      content="Find your best AKTU/UPTU college using our UPTAC 2024 predictor tool."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://uptac.onrender.com" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* Material Design 3 Inspired Modern CSS */
      @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap");

      :root {
        /* Material Design 3 Color Tokens */
        --md-sys-color-primary: #6750a4;
        --md-sys-color-primary-container: #eaddff;
        --md-sys-color-on-primary: #ffffff;
        --md-sys-color-on-primary-container: #21005d;
        --md-sys-color-secondary: #625b71;
        --md-sys-color-secondary-container: #e8def8;
        --md-sys-color-on-secondary: #ffffff;
        --md-sys-color-on-secondary-container: #1d192b;
        --md-sys-color-surface: #fef7ff;
        --md-sys-color-surface-variant: #e7e0ec;
        --md-sys-color-on-surface: #1c1b1f;
        --md-sys-color-on-surface-variant: #49454f;
        --md-sys-color-outline: #79747e;
        --md-sys-color-outline-variant: #cac4d0;
        --md-sys-color-shadow: #000000;
        --md-sys-color-scrim: #000000;
        --md-sys-color-inverse-surface: #313033;
        --md-sys-color-inverse-on-surface: #f4eff4;
        --md-sys-color-error: #ba1a1a;
        --md-sys-color-error-container: #ffdad6;
        --md-sys-color-on-error: #ffffff;
        --md-sys-color-on-error-container: #410002;

        /* Elevation tokens */
        --md-sys-elevation-level0: none;
        --md-sys-elevation-level1: 0px 1px 2px 0px rgba(0, 0, 0, 0.3),
          0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        --md-sys-elevation-level2: 0px 1px 2px 0px rgba(0, 0, 0, 0.3),
          0px 2px 6px 2px rgba(0, 0, 0, 0.15);
        --md-sys-elevation-level3: 0px 1px 3px 0px rgba(0, 0, 0, 0.3),
          0px 4px 8px 3px rgba(0, 0, 0, 0.15);
        --md-sys-elevation-level4: 0px 2px 3px 0px rgba(0, 0, 0, 0.3),
          0px 6px 10px 4px rgba(0, 0, 0, 0.15);
        --md-sys-elevation-level5: 0px 4px 4px 0px rgba(0, 0, 0, 0.3),
          0px 8px 12px 6px rgba(0, 0, 0, 0.15);

        /* Shape tokens */
        --md-sys-shape-corner-none: 0px;
        --md-sys-shape-corner-extra-small: 4px;
        --md-sys-shape-corner-small: 8px;
        --md-sys-shape-corner-medium: 12px;
        --md-sys-shape-corner-large: 16px;
        --md-sys-shape-corner-extra-large: 28px;

        /* Typography tokens */
        --md-sys-typescale-display-large-font: "Roboto";
        --md-sys-typescale-display-large-size: 57px;
        --md-sys-typescale-display-large-weight: 400;
        --md-sys-typescale-headline-large-font: "Roboto";
        --md-sys-typescale-headline-large-size: 32px;
        --md-sys-typescale-headline-large-weight: 400;
        --md-sys-typescale-headline-medium-font: "Roboto";
        --md-sys-typescale-headline-medium-size: 28px;
        --md-sys-typescale-headline-medium-weight: 400;
        --md-sys-typescale-title-large-font: "Roboto";
        --md-sys-typescale-title-large-size: 22px;
        --md-sys-typescale-title-large-weight: 400;
        --md-sys-typescale-body-large-font: "Roboto";
        --md-sys-typescale-body-large-size: 16px;
        --md-sys-typescale-body-large-weight: 400;
        --md-sys-typescale-body-medium-font: "Roboto";
        --md-sys-typescale-body-medium-size: 14px;
        --md-sys-typescale-body-medium-weight: 400;
        --md-sys-typescale-label-large-font: "Roboto";
        --md-sys-typescale-label-large-size: 14px;
        --md-sys-typescale-label-large-weight: 500;
      }

      /* Reset and base styles */
      * {
        box-sizing: border-box;
      }

      body {
        font-family: var(--md-sys-typescale-body-large-font), -apple-system,
          BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
        font-size: var(--md-sys-typescale-body-large-size) !important;
        font-weight: var(--md-sys-typescale-body-large-weight) !important;
        line-height: 1.5 !important;
        color: var(--md-sys-color-on-surface) !important;
        background-color: var(--md-sys-color-surface) !important;
        margin: 0 !important;
        padding: 24px !important;
        min-height: 100vh;
      }

      /* Container */
      .container-fluid {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Typography */
      h3 {
        font-family: var(--md-sys-typescale-headline-medium-font) !important;
        font-size: var(--md-sys-typescale-headline-medium-size) !important;
        font-weight: var(--md-sys-typescale-headline-medium-weight) !important;
        color: var(--md-sys-color-on-surface) !important;
        margin: 0 0 32px 0 !important;
      }

      h5 {
        font-family: var(--md-sys-typescale-title-large-font) !important;
        font-size: var(--md-sys-typescale-title-large-size) !important;
        font-weight: var(--md-sys-typescale-title-large-weight) !important;
        color: var(--md-sys-color-on-surface) !important;
        margin: 32px 0 16px 0 !important;
      }

      /* Form styles */
      #filter-form {
        background: var(--md-sys-color-surface) !important;
        border: 1px solid var(--md-sys-color-outline-variant) !important;
        border-radius: var(--md-sys-shape-corner-large) !important;
        padding: 24px !important;
        margin-bottom: 24px !important;
        box-shadow: var(--md-sys-elevation-level1) !important;
      }

      .form-label {
        font-family: var(--md-sys-typescale-label-large-font) !important;
        font-size: var(--md-sys-typescale-label-large-size) !important;
        font-weight: var(--md-sys-typescale-label-large-weight) !important;
        color: var(--md-sys-color-on-surface-variant) !important;
        margin-bottom: 8px !important;
      }

      .form-control {
        font-family: var(--md-sys-typescale-body-large-font) !important;
        font-size: var(--md-sys-typescale-body-large-size) !important;
        background-color: var(--md-sys-color-surface-variant) !important;
        border: 1px solid var(--md-sys-color-outline) !important;
        border-radius: var(--md-sys-shape-corner-extra-small) !important;
        color: var(--md-sys-color-on-surface) !important;
        padding: 12px 16px !important;
        transition: all 0.2s cubic-bezier(0.2, 0, 0, 1) !important;
      }

      .form-control:focus {
        background-color: var(--md-sys-color-surface) !important;
        border-color: var(--md-sys-color-primary) !important;
        box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.2) !important;
        outline: none !important;
      }

      .form-control::placeholder {
        color: var(--md-sys-color-on-surface-variant) !important;
        opacity: 0.6;
      }

      /* Button styles */
      .btn {
        font-family: var(--md-sys-typescale-label-large-font) !important;
        font-size: var(--md-sys-typescale-label-large-size) !important;
        font-weight: var(--md-sys-typescale-label-large-weight) !important;
        border-radius: var(--md-sys-shape-corner-large) !important;
        padding: 12px 24px !important;
        border: none !important;
        cursor: pointer !important;
        transition: all 0.2s cubic-bezier(0.2, 0, 0, 1) !important;
        text-transform: none !important;
        position: relative !important;
        overflow: hidden !important;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: currentColor;
        opacity: 0;
        transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
      }

      .btn:hover::before {
        opacity: 0.08;
      }

      .btn:active::before {
        opacity: 0.12;
      }

      .btn-primary {
        background-color: var(--md-sys-color-primary) !important;
        color: var(--md-sys-color-on-primary) !important;
        box-shadow: var(--md-sys-elevation-level1) !important;
      }

      .btn-primary:hover {
        background-color: var(--md-sys-color-primary) !important;
        color: var(--md-sys-color-on-primary) !important;
        box-shadow: var(--md-sys-elevation-level2) !important;
      }

      .btn-primary:active {
        box-shadow: var(--md-sys-elevation-level1) !important;
      }

      .btn-outline-secondary {
        background-color: transparent !important;
        color: var(--md-sys-color-primary) !important;
        border: 1px solid var(--md-sys-color-outline) !important;
      }

      .btn-outline-secondary:hover {
        background-color: var(--md-sys-color-primary-container) !important;
        color: var(--md-sys-color-on-primary-container) !important;
        border-color: var(--md-sys-color-primary) !important;
      }

      .btn-secondary {
        background-color: var(--md-sys-color-secondary-container) !important;
        color: var(--md-sys-color-on-secondary-container) !important;
        border: 1px solid var(--md-sys-color-outline-variant) !important;
      }

      .btn-secondary:hover {
        background-color: var(--md-sys-color-secondary-container) !important;
        color: var(--md-sys-color-on-secondary-container) !important;
        box-shadow: var(--md-sys-elevation-level1) !important;
      }

      /* Dropdown styles */
      .dropdown {
        position: relative !important;
      }

      .dropdown-toggle {
        min-width: 120px !important;
        text-align: left !important;
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
      }

      .dropdown-toggle::after {
        border: none !important;
        content: "â–¾" !important;
        font-size: 12px !important;
        margin-left: 8px !important;
      }

      .dropdown-menu {
        background-color: var(--md-sys-color-surface) !important;
        border: 1px solid var(--md-sys-color-outline-variant) !important;
        border-radius: var(--md-sys-shape-corner-medium) !important;
        box-shadow: var(--md-sys-elevation-level3) !important;
        padding: 8px !important;
        margin-top: 4px !important;
        min-width: 200px !important;
        max-height: 300px !important;
        overflow-y: auto !important;
      }

      .dropdown-menu::-webkit-scrollbar {
        width: 8px;
      }

      .dropdown-menu::-webkit-scrollbar-track {
        background: var(--md-sys-color-surface-variant);
        border-radius: 4px;
      }

      .dropdown-menu::-webkit-scrollbar-thumb {
        background: var(--md-sys-color-outline);
        border-radius: 4px;
      }

      .dropdown-menu::-webkit-scrollbar-thumb:hover {
        background: var(--md-sys-color-on-surface-variant);
      }

      .dropdown-item {
        font-family: var(--md-sys-typescale-body-medium-font) !important;
        font-size: var(--md-sys-typescale-body-medium-size) !important;
        color: var(--md-sys-color-on-surface) !important;
        padding: 8px 12px !important;
        border-radius: var(--md-sys-shape-corner-extra-small) !important;
        display: flex !important;
        align-items: center !important;
        cursor: pointer !important;
        transition: background-color 0.2s cubic-bezier(0.2, 0, 0, 1) !important;
        border: none !important;
        background: none !important;
        margin: 2px 0 !important;
      }

      .dropdown-item:hover {
        background-color: var(--md-sys-color-secondary-container) !important;
        color: var(--md-sys-color-on-secondary-container) !important;
      }

      .dropdown-item:active {
        background-color: var(--md-sys-color-primary-container) !important;
        color: var(--md-sys-color-on-primary-container) !important;
      }

      /* Checkbox styles */
      .form-check-input {
        width: 18px !important;
        height: 18px !important;
        margin-right: 12px !important;
        margin-top: 0 !important;
        border: 2px solid var(--md-sys-color-outline) !important;
        border-radius: 2px !important;
        background-color: transparent !important;
        cursor: pointer !important;
        transition: all 0.2s cubic-bezier(0.2, 0, 0, 1) !important;
      }

      .form-check-input:focus {
        border-color: var(--md-sys-color-primary) !important;
        box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.2) !important;
      }

      .form-check-input:checked {
        background-color: var(--md-sys-color-primary) !important;
        border-color: var(--md-sys-color-primary) !important;
      }

      .form-check-input:checked::after {
        color: var(--md-sys-color-on-primary) !important;
        font-size: 12px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        width: 100% !important;
        height: 100% !important;
      }

      /* Pagination container */
      .pg {
        display: flex;
        align-items: center; /* vertically centers items */
        gap: 10px; /* optional spacing between items */
        flex-wrap: wrap; /* allows wrapping on small screens */
        background: var(--md-sys-color-surface) !important;
        /*border: 1px solid var(--md-sys-color-outline-variant) !important;*/
        margin-bottom: 100px;
      }

      .form-label-mb-0 {
        margin-top: 10px;
        margin-bottom: 2px;
      }

      /* Page info */
      #page-info {
        font-family: var(--md-sys-typescale-body-medium-font) !important;
        font-size: var(--md-sys-typescale-body-medium-size) !important;
        font-weight: 500 !important;
        color: var(--md-sys-color-on-surface) !important;
        padding: 12px 16px !important;
        background-color: var(--md-sys-color-primary-container) !important;
        color: var(--md-sys-color-on-primary-container) !important;
        border-radius: var(--md-sys-shape-corner-medium) !important;
        border: 1px solid var(--md-sys-color-outline-variant) !important;
      }

      /* Results container */
      #result-box {
        background-color: var(--md-sys-color-surface-variant) !important;
        border: 1px solid var(--md-sys-color-outline-variant) !important;
        border-radius: var(--md-sys-shape-corner-large) !important;
        padding: 24px !important;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          "Consolas", monospace !important;
        font-size: 14px !important;
        line-height: 1.5 !important;
        color: var(--md-sys-color-on-surface-variant) !important;
        min-height: 200px !important;
        white-space: pre !important;
        overflow-x: auto !important;
        box-shadow: var(--md-sys-elevation-level1) !important;
      }

      #result-box::-webkit-scrollbar {
        height: 8px;
      }

      #result-box::-webkit-scrollbar-track {
        background: var(--md-sys-color-surface);
        border-radius: 4px;
      }

      #result-box::-webkit-scrollbar-thumb {
        background: var(--md-sys-color-outline);
        border-radius: 4px;
      }

      #result-box::-webkit-scrollbar-thumb:hover {
        background: var(--md-sys-color-on-surface-variant);
      }

      /* Filter container */
      #filter-container {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 12px !important;
        margin-bottom: 24px !important;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        body {
          padding: 16px !important;
        }

        #filter-form {
          padding: 16px !important;
        }

        .row.g-3.align-items-center.mb-2 {
          padding: 12px 16px !important;
        }

        #filter-container {
          gap: 8px !important;
        }

        .dropdown-toggle {
          min-width: 100px !important;
          font-size: 14px !important;
        }

        .btn {
          padding: 10px 20px !important;
          font-size: 14px !important;
        }

        #result-box {
          padding: 16px !important;
          font-size: 12px !important;
          margin-bottom: 30px !important;
        }

        h3 {
          font-size: 26px !important;
          margin-bottom: 50px !important;
          padding-left: 2px !important;
        }

        h5 {
          font-size: 18px !important;
          margin-top: 50px !important;
          margin-left: 2px !important;
        }
      }

      @media (max-width: 480px) {
        .col-auto {
          width: 100% !important;
          margin-bottom: 8px !important;
        }

        #filter-container {
          flex-direction: column !important;
        }

        .dropdown-toggle {
          width: 100% !important;
          min-width: unset !important;
        }
      }

      /* Focus visible for accessibility */
      .btn:focus-visible,
      .form-control:focus-visible,
      .dropdown-toggle:focus-visible {
        outline: 2px solid var(--md-sys-color-primary) !important;
        outline-offset: 2px !important;
      }

      /* Smooth transitions */
      * {
        transition: background-color 0.2s cubic-bezier(0.2, 0, 0, 1),
          border-color 0.2s cubic-bezier(0.2, 0, 0, 1),
          color 0.2s cubic-bezier(0.2, 0, 0, 1),
          box-shadow 0.2s cubic-bezier(0.2, 0, 0, 1) !important;
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          --md-sys-color-primary: #d0bcff;
          --md-sys-color-primary-container: #4f378b;
          --md-sys-color-on-primary: #371e73;
          --md-sys-color-on-primary-container: #eaddff;
          --md-sys-color-secondary: #ccc2dc;
          --md-sys-color-secondary-container: #4a4458;
          --md-sys-color-on-secondary: #332d41;
          --md-sys-color-on-secondary-container: #e8def8;
          --md-sys-color-surface: #10100f;
          --md-sys-color-surface-variant: #49454f;
          --md-sys-color-on-surface: #e6e1e5;
          --md-sys-color-on-surface-variant: #cac4d0;
          --md-sys-color-outline: #938f99;
          --md-sys-color-outline-variant: #49454f;
          --md-sys-color-inverse-surface: #e6e1e5;
          --md-sys-color-inverse-on-surface: #313033;
          --md-sys-color-error: #ffb4ab;
          --md-sys-color-error-container: #93000a;
          --md-sys-color-on-error: #690005;
          --md-sys-color-on-error-container: #ffdad6;
        }
      }
    </style>
  </head>
  <body class="p-3">
    <h3>UPTAC/AKTU COLLEGE PREDICTOR (DATA-2024)</h3>

    <form id="filter-form" class="mb-3">
      <div class="row g-3 mb-3">
        <div class="col-auto">
          <label class="form-label">Rank</label>
          <input type="number" class="form-control" name="rank" />
        </div>
      </div>

      <div id="filter-container" class="d-flex flex-wrap gap-3 mb-3"></div>

      <button type="submit" class="btn btn-primary">SEARCH</button>
    </form>

    <h5>RESULTS</h5>
    <pre
      id="result-box"
      class="bg-light p-3 border rounded"
      style="min-height: 200px"
    ></pre>
    <div class="pg">
      <div>
        <button class="btn btn-outline-secondary" id="prev-page">
          Previous
        </button>
      </div>
      <div>
        <span id="page-info">Page 1</span>
      </div>
      <div>
        <button class="btn btn-outline-secondary" id="next-page">Next</button>
      </div>
      <div>
        <label class="form-label-mb-0">MAX RESULTS</label>
        <input
          type="number"
          class="form-control"
          id="max-results"
          value="25"
          style="width: 100px"
        />
      </div>
    </div>
    <h5>
      <p>Additional Resources for Choice Filling :</p>
      <li>
        <a href="/res">Institute wise Distribution Sorted by CR for each Category</a>
      </li>
      <br />
      <li>
        <a href="/res2">Program wise Distribution Sorted by CR for each Category</a>
      </li>
      <br />
      <li>
        <a href="/static/avg.html">Average Package Data (Gemini 2.5 Pro)</a>
      </li>
      <br />
      <br />

      <a href="https://github.com/git-divy/uptac">v1.3.0</a>
    </h5>

    <script>
      let currentPage = 1;
      let totalPages = 1;

      document.addEventListener("DOMContentLoaded", () => {
        fetch("/api/filters")
          .then((res) => res.json())
          .then((data) => {
            const container = document.getElementById("filter-container");

            Object.entries(data).forEach(([field, options]) => {
              const dropdownDiv = document.createElement("div");
              dropdownDiv.className = "dropdown";

              const button = document.createElement("button");
              button.className = "btn btn-secondary dropdown-toggle";
              button.type = "button";
              button.dataset.bsToggle = "dropdown";
              button.setAttribute("aria-expanded", "false");
              button.textContent = field.toUpperCase();

              const menu = document.createElement("ul");
              menu.className = "dropdown-menu p-2";

              const anyCheckbox = document.createElement("input");
              anyCheckbox.type = "checkbox";
              anyCheckbox.checked = true;
              anyCheckbox.className = `form-check-input me-2 any-checkbox-${field}`;

              const anyLi = document.createElement("li");
              const anyLabel = document.createElement("label");
              anyLabel.className = "dropdown-item";
              anyLabel.appendChild(anyCheckbox);
              anyLabel.append("ANY");
              anyLi.appendChild(anyLabel);
              menu.appendChild(anyLi);

              const fieldCheckboxes = [];

              options.forEach((opt) => {
                const cb = document.createElement("input");
                cb.type = "checkbox";
                cb.value = opt;
                cb.name = `${field}`;
                cb.className = `form-check-input me-2 option-checkbox-${field}`;

                const li = document.createElement("li");
                const label = document.createElement("label");
                label.className = "dropdown-item";
                label.appendChild(cb);
                label.append(opt);
                li.appendChild(label);
                menu.appendChild(li);

                fieldCheckboxes.push(cb);

                cb.addEventListener("change", () => {
                  if (cb.checked) anyCheckbox.checked = false;
                });
              });

              anyCheckbox.addEventListener("change", () => {
                if (anyCheckbox.checked)
                  fieldCheckboxes.forEach((cb) => (cb.checked = false));
              });

              dropdownDiv.appendChild(button);
              dropdownDiv.appendChild(menu);
              container.appendChild(dropdownDiv);
            });
          });

        document
          .getElementById("filter-form")
          .addEventListener("submit", (e) => {
            e.preventDefault();
            currentPage = 1;
            loadPage();
          });

        document.getElementById("next-page").addEventListener("click", () => {
          if (currentPage < totalPages) {
            currentPage++;
            loadPage();
          }
        });

        document.getElementById("prev-page").addEventListener("click", () => {
          if (currentPage > 1) {
            currentPage--;
            loadPage();
          }
        });

        function loadPage() {
          const formData = new FormData(document.getElementById("filter-form"));
          const requestBody = {
            max_results:
              parseInt(document.getElementById("max-results").value) || 25,
            page: currentPage,
          };

          const rank = formData.get("rank");
          if (rank) requestBody.rank = parseInt(rank);

          const filterFields = [
            "round",
            "institute",
            "program",
            "quota",
            "category",
          ];
          for (let field of filterFields) {
            const anyChecked = document.querySelector(
              `.any-checkbox-${field}`
            )?.checked;
            if (!anyChecked) {
              const values = Array.from(
                document.querySelectorAll(`.option-checkbox-${field}:checked`)
              ).map((cb) => cb.value);
              if (values.length > 0) requestBody[field] = values;
            }
          }

          fetch("/api/data", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(requestBody),
          })
            .then((res) => res.json())
            .then((data) => {
              window.scrollTo(0, 500);
              document.getElementById("result-box").textContent = data.results;
              totalPages = data.meta_data.total_pages;
              document.getElementById(
                "page-info"
              ).textContent = `Page ${data.meta_data.current_page} of ${data.meta_data.total_pages}`;
            });
        }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
